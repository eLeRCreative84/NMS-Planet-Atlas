<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<title>Prosty Atlas Planet</title>
<script src="https://unpkg.com/three"></script>
<script src="https://unpkg.com/globe.gl"></script>
<style>
  body { margin:0; display:flex; height:100vh; font-family:Arial, sans-serif; }
  #form { flex:0 0 300px; padding:1rem; background:#0a1e3a; color:white; overflow-y:auto; }
  #globeViz { flex:1; background:black; }
  input, button { width:100%; margin:0.3rem 0; padding:0.4rem; box-sizing:border-box; }
  button { cursor:pointer; }
  #planetList button { margin:0.2rem 0; width:100%; }
</style>
</head>
<body>

<div id="form">
  <h2>Twórz planetę</h2>
  <input type="text" id="newPlanetName" placeholder="Nazwa planety" />
  <input type="text" id="planetTextureUrl" placeholder="URL tekstury" />
  <button onclick="addPlanet()">Dodaj planetę</button>

  <h2>Lista planet</h2>
  <div id="planetList"></div>
</div>

<div id="globeViz"></div>

<script>
let planetData = [];
let currentPlanet = null;

// Inicjalizacja globu
const globe = Globe()(document.getElementById('globeViz'))
  .globeImageUrl(null)
  .backgroundImageUrl('https://unpkg.com/three-globe/example/img/night-sky.png');

// Funkcje
function updatePlanetList() {
  const list = document.getElementById('planetList');
  list.innerHTML = '';
  planetData.forEach(p => {
    const btn = document.createElement('button');
    btn.textContent = p.name;
    btn.onclick = () => selectPlanet(p.name);
    list.appendChild(btn);
  });
}

function addPlanet() {
  const name = document.getElementById('newPlanetName').value.trim();
  const texture = document.getElementById('planetTextureUrl').value.trim();
  if (!name || !texture) { alert("Podaj nazwę i URL tekstury!"); return; }

  // Sprawdzenie czy planeta już istnieje
  if (planetData.some(p => p.name === name)) {
    alert("Planeta o tej nazwie już istnieje!");
    return;
  }

  planetData.push({ name, texture });
  document.getElementById('newPlanetName').value = '';
  document.getElementById('planetTextureUrl').value = '';
  updatePlanetList();
  selectPlanet(name);
}

function selectPlanet(name) {
  const planet = planetData.find(p => p.name === name);
  if (!planet) return;
  currentPlanet = planet.name;
  globe.globeImageUrl(planet.texture);
}
</script>

</body>
</html>
